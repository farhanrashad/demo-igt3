<?xml version="1.0" encoding="utf-8"?>
<odoo>
     
    <!-- Purchase Subscription -->
    
    <record id="view_purchase_subscription_form_inherit_type" model="ir.ui.view">
        <field name="name">view.purchase.subscription.form.inherit.type</field>
        <field name="model">purchase.subscription</field>
        <field name="inherit_id" ref="de_purchase_subscription.purchase_subcription_form_view" />
        <field name="arch" type="xml">
             <xpath expr="//header" position="inside">
                <button name="%(action_purchase_subscription_adjustments_wizard)d" string="Adjusting Entries" type="action" class="btn-primary" attrs="{'invisible': [('stage_category','=', 'draft')]}" />
            </xpath>
            <xpath expr="//field[@name='stage_id']" position="replace">
                 <field name="stage_id" widget="statusbar" options="{'clickable': '0', 'fold_field': 'fold'}"/>
            </xpath>
            <xpath expr="//button[1]" position="after">
                <button name="action_submit" string="Submit for Approval" type="object" class="btn-primary" attrs="{'invisible': [('stage_category','!=', 'draft')]}" />

                <button name="action_confirm" string="Confirm" type="object" class="btn-primary" attrs="{'invisible': [('stage_category','!=', 'progress')]}" />
                <button name="action_refuse" string="Refuse" type="object" class="btn-secondary" attrs="{'invisible': [('stage_category','!=', 'progress')]}" />
                <button name="action_close" string="Close" type="object" class="btn-secondary" attrs="{'invisible': [('stage_category','!=', 'confirm')]}" />
                <button name="action_cancel" string="Cancel" type="object" class="btn-secondary" attrs="{'invisible': [('stage_category','!=', 'confirm')]}" />



                <button name="%(action_purchase_subscription_plan_wizard)d" string="Plan Subscription" type="action" class="btn-primary" attrs="{'invisible': [('stage_category','!=', 'confirm')]}" />
            </xpath>
	    <xpath expr="//field[@name='subscription_plan_id']" position="after">
		<field name="rfi_date" />
		<field name="original_amount" />
		<field name="current_amount" />
		<field name="amount_current" />
		<field name="total_comitment" />
		<field name="open_comitment" />
            </xpath>
        </field>
    </record>
    

        <!-- Purchase Other Agreement  -->
		<record id="action_purchase_subscription_other" model="ir.actions.act_window">
			<field name="name">Subscriptions</field>
			<field name="res_model">purchase.subscription</field>
			<field name="type">ir.actions.act_window</field>
			<field name="view_mode">kanban,tree,form,pivot,graph,cohort,activity</field>
            <field name="context">{"search_default_my_subscriptions":1}</field>
            <field name="domain">[]</field>
            <field name="search_view_id" eval='False'/>
			<field name="help" type="html">
				<p class="o_view_nocontent_smiling_face">
					Create a new Agreement
				</p>
                <p>
                    Create subscription agreement to manage recurring billing &amp; payments. </p>
			</field>
		</record>
		<!--
        <menuitem id="purchase_subscription_dashboard_menu" name="Dashboard" parent="purchase_subscription_root_menu" action="subscription_type_action_new_subscription" sequence="1" />
-->

		<menuitem id="purchase_subscription_purchase_subscription_agreement_menu" name="Agreements" parent="operations_purchase_menu" action="de_purchase_subscription.subscription_type_action_new_subscription" sequence="1" />
			
</odoo>


